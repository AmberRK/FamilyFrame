<!doctype html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Family Frame</title>
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="styles/styles.css">
    <link rel="icon" href="../images/familyFrameLogo.svg" type="image/svg+xml">

</head>


<body onload="javascript: getMyTrees()">
    <div id="flex-container">
        <div id="navbarPlaceholder"></div>

        <div>
            <h2>My Trees</h2>
            <br>
        </div>

        <!-- <div id="JWT test">
            <button onclick="getMyTrees()">Get My Trees (on load)</button>
        </div> -->
        <!-- <div id="debugTrees">
            <button onclick="getALLTrees()">Get ALL Trees. To test adding a tree by code</button>
        </div> -->
        <div id="myTreesDiv">
            <h3>Trees I created</h3>
            <table id="showMyTrees">
                <th>Name</th>
                <th>Share Code</th>
            </table>
            <br>
        </div>

        <div id="sharedTreesDiv">
            <h3>Trees shared with me</h3>
            <table id="showALLTrees">
                <th>Name</th>
            </table>
            <br>
            <br>
        </div>

        <section class="modal hidden">
            <div class="flex">
                <button class="btn-close">⨉</button>
            </div>
            <div>
                <h3>Add a tree via a share code</h3>
            </div>
            <form id="submitCode">
                <input type="text" autocomplete="off" name="shareCode" id="shareCode"
                    placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx" />
                <input class="submit" id="submitCode" type="submit" value="Add tree" onClick="addATree()">
            </form>

        </section>

        <div class="overlay hidden"></div>
        <button class="btn btn-open">Add a tree with a code</button>

        <section id="makeTreeDiv" class="modal hidden">
            <div class="flex">
                <button class="btn-close">⨉</button>
            </div>
            <div>
                <h3>Create a tree</h3>
            </div>
            <form id="createTreeForm">
                <input type="text" autocomplete="off" name="treeName" id="treeName"
                    placeholder="Name" />
                <input class="submit" id="submitTree" type="submit" value="Create tree" onClick="">
            </form>
        </section>

        <div class="overlay hidden"></div>
        <button class="btn btn-open">Create a tree</button>

        <div id="popup" class="popup">
            <p>Are you sure?</p>
            <div class="popup-buttons">
                <button id="yesButton" class="popup-button">Yes</button>
                <button id="noButton" class="popup-button">No</button>
            </div>
        </div>

        <footer>
            <div id="footerPlaceholder"></div>
        </footer>

        <script>
        </script>
        <script src="scripts/leader-line.min.js"></script>
        <script src="scripts/main.js"></script>
        <script src="scripts/transaction.js"></script>
        <script src="scripts/navbar.js"></script>
        <script src="scripts/footer.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function () {
                replacePlaceholderFooter();
            });
            const modal = document.querySelector(".modal");
            const overlay = document.querySelector(".overlay");
            const openModalBtn = document.querySelector(".btn-open");
            const closeModalBtn = document.querySelector(".btn-close");

            // close modal function
            const closeModal = function () {
                modal.classList.add("hidden");
                overlay.classList.add("hidden");
            };

            // close the modal when the close button and overlay is clicked
            closeModalBtn.addEventListener("click", closeModal);
            overlay.addEventListener("click", closeModal);

            // close modal when the Esc key is pressed
            document.addEventListener("keydown", function (e) {
                if (e.key === "Escape" && !modal.classList.contains("hidden")) {
                    closeModal();
                }
            });

            // open modal function
            const openModal = function () {
                modal.classList.remove("hidden");
                overlay.classList.remove("hidden");
            };
            // open modal event
            openModalBtn.addEventListener("click", openModal);

        </script>
    </div>
</body>

</html>
